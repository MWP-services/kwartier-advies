"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./lib/simulation.ts":
/*!***************************!*\
  !*** ./lib/simulation.ts ***!
  \***************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findHighestPeakDay: function() { return /* binding */ findHighestPeakDay; },\n/* harmony export */   simulateAllScenarios: function() { return /* binding */ simulateAllScenarios; },\n/* harmony export */   simulateSingleScenario: function() { return /* binding */ simulateSingleScenario; }\n/* harmony export */ });\n/* harmony import */ var _calculations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calculations */ \"(app-pages-browser)/./lib/calculations.ts\");\n/* harmony import */ var _datetime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./datetime */ \"(app-pages-browser)/./lib/datetime.ts\");\n\n\nfunction simulateSingleScenario(intervals, batteryCapacityKwh, sizingKwNeeded, maxExcessKw, config) {\n    var _BATTERY_OPTIONS_find;\n    var _config_powerCapKw;\n    const powerCapKw = (_config_powerCapKw = config === null || config === void 0 ? void 0 : config.powerCapKw) !== null && _config_powerCapKw !== void 0 ? _config_powerCapKw : sizingKwNeeded > 0 ? sizingKwNeeded : Math.min(maxExcessKw, batteryCapacityKwh / 0.5);\n    var _config_initialSocRatio;\n    const initialSocRatio = (_config_initialSocRatio = config === null || config === void 0 ? void 0 : config.initialSocRatio) !== null && _config_initialSocRatio !== void 0 ? _config_initialSocRatio : 0.5;\n    const chargeEfficiency = 0.95;\n    const contractKw = Math.max(0, ...intervals.map((interval)=>interval.consumptionKw - interval.excessKw));\n    let soc = batteryCapacityKwh * initialSocRatio;\n    let exceedanceIntervalsBefore = 0;\n    let exceedanceIntervalsAfter = 0;\n    let exceedanceEnergyKwhBefore = 0;\n    let exceedanceEnergyKwhAfter = 0;\n    let maxRemainingExcessKw = 0;\n    const dailyTotals = new Map();\n    const shavedSeries = intervals.map((interval)=>{\n        const day = interval.timestamp.slice(0, 10);\n        var _dailyTotals_get;\n        const dayTotal = (_dailyTotals_get = dailyTotals.get(day)) !== null && _dailyTotals_get !== void 0 ? _dailyTotals_get : {\n            before: 0,\n            after: 0\n        };\n        dailyTotals.set(day, dayTotal);\n        const headroomKw = Math.max(0, contractKw - interval.consumptionKw);\n        const chargeKwh = Math.min(headroomKw, powerCapKw) * 0.25 * chargeEfficiency;\n        soc = Math.min(batteryCapacityKwh, soc + chargeKwh);\n        if (interval.excessKw > 0) {\n            exceedanceIntervalsBefore += 1;\n            exceedanceEnergyKwhBefore += interval.excessKwh;\n            dayTotal.before += interval.excessKwh;\n            const dischargeNeedKwh = Math.min(interval.excessKw, powerCapKw) * 0.25;\n            const deliveredKwh = Math.min(dischargeNeedKwh, soc);\n            soc -= deliveredKwh;\n            const shavedKw = deliveredKwh / 0.25;\n            const remainingExcessKw = interval.excessKw - deliveredKwh / 0.25;\n            if (remainingExcessKw > 0) {\n                exceedanceIntervalsAfter += 1;\n                exceedanceEnergyKwhAfter += remainingExcessKw * 0.25;\n                dayTotal.after += remainingExcessKw * 0.25;\n            }\n            maxRemainingExcessKw = Math.max(maxRemainingExcessKw, remainingExcessKw);\n            return {\n                timestamp: interval.timestamp,\n                originalKw: interval.consumptionKw,\n                shavedKw: interval.consumptionKw - shavedKw\n            };\n        }\n        return {\n            timestamp: interval.timestamp,\n            originalKw: interval.consumptionKw,\n            shavedKw: interval.consumptionKw\n        };\n    });\n    const achievedComplianceDataset = exceedanceEnergyKwhBefore === 0 ? 1 : 1 - exceedanceEnergyKwhAfter / exceedanceEnergyKwhBefore;\n    const dailyComplianceValues = Array.from(dailyTotals.values()).map((param)=>{\n        let { before, after } = param;\n        return before === 0 ? 1 : 1 - after / before;\n    });\n    const achievedComplianceDailyAverage = dailyComplianceValues.length === 0 ? 1 : dailyComplianceValues.reduce((sum, value)=>sum + value, 0) / dailyComplianceValues.length;\n    var _BATTERY_OPTIONS_find_label;\n    return {\n        optionLabel: (_BATTERY_OPTIONS_find_label = (_BATTERY_OPTIONS_find = _calculations__WEBPACK_IMPORTED_MODULE_0__.BATTERY_OPTIONS.find((b)=>b.capacityKwh === batteryCapacityKwh)) === null || _BATTERY_OPTIONS_find === void 0 ? void 0 : _BATTERY_OPTIONS_find.label) !== null && _BATTERY_OPTIONS_find_label !== void 0 ? _BATTERY_OPTIONS_find_label : \"\".concat(batteryCapacityKwh, \" kWh\"),\n        capacityKwh: batteryCapacityKwh,\n        exceedanceIntervalsBefore,\n        exceedanceIntervalsAfter,\n        exceedanceEnergyKwhBefore,\n        exceedanceEnergyKwhAfter,\n        achievedComplianceDataset,\n        achievedComplianceDailyAverage,\n        achievedCompliance: achievedComplianceDataset,\n        maxRemainingExcessKw,\n        shavedSeries\n    };\n}\nfunction simulateAllScenarios(intervals, sizingKwNeeded, config) {\n    const maxExcessKw = Math.max(0, ...intervals.map((interval)=>interval.excessKw));\n    return _calculations__WEBPACK_IMPORTED_MODULE_0__.BATTERY_OPTIONS.map((option)=>simulateSingleScenario(intervals, option.capacityKwh, sizingKwNeeded, maxExcessKw, config));\n}\nfunction findHighestPeakDay(intervals) {\n    const totalsByDay = new Map();\n    intervals.forEach((interval)=>{\n        const day = (0,_datetime__WEBPACK_IMPORTED_MODULE_1__.getLocalDayIso)(interval.timestamp);\n        if (!day) return;\n        var _totalsByDay_get;\n        totalsByDay.set(day, ((_totalsByDay_get = totalsByDay.get(day)) !== null && _totalsByDay_get !== void 0 ? _totalsByDay_get : 0) + interval.excessKw);\n    });\n    let highestDay = null;\n    let maxTotal = -1;\n    totalsByDay.forEach((total, day)=>{\n        if (total > maxTotal) {\n            maxTotal = total;\n            highestDay = day;\n        }\n    });\n    return highestDay;\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9zaW11bGF0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlFO0FBQzdCO0FBcUJyQyxTQUFTRSx1QkFDZEMsU0FBOEIsRUFDOUJDLGtCQUEwQixFQUMxQkMsY0FBc0IsRUFDdEJDLFdBQW1CLEVBQ25CQyxNQUF5QjtRQXlFVlA7UUF0RWJPO0lBREYsTUFBTUMsYUFDSkQsQ0FBQUEscUJBQUFBLG1CQUFBQSw2QkFBQUEsT0FBUUMsVUFBVSxjQUFsQkQsZ0NBQUFBLHFCQUNDRixpQkFBaUIsSUFDZEEsaUJBQ0FJLEtBQUtDLEdBQUcsQ0FBQ0osYUFBYUYscUJBQXFCO1FBQ3pCRztJQUF4QixNQUFNSSxrQkFBa0JKLENBQUFBLDBCQUFBQSxtQkFBQUEsNkJBQUFBLE9BQVFJLGVBQWUsY0FBdkJKLHFDQUFBQSwwQkFBMkI7SUFDbkQsTUFBTUssbUJBQW1CO0lBQ3pCLE1BQU1DLGFBQWFKLEtBQUtLLEdBQUcsQ0FBQyxNQUFNWCxVQUFVWSxHQUFHLENBQUMsQ0FBQ0MsV0FBYUEsU0FBU0MsYUFBYSxHQUFHRCxTQUFTRSxRQUFRO0lBRXhHLElBQUlDLE1BQU1mLHFCQUFxQk87SUFDL0IsSUFBSVMsNEJBQTRCO0lBQ2hDLElBQUlDLDJCQUEyQjtJQUMvQixJQUFJQyw0QkFBNEI7SUFDaEMsSUFBSUMsMkJBQTJCO0lBQy9CLElBQUlDLHVCQUF1QjtJQUMzQixNQUFNQyxjQUFjLElBQUlDO0lBRXhCLE1BQU1DLGVBQWV4QixVQUFVWSxHQUFHLENBQUMsQ0FBQ0M7UUFDbEMsTUFBTVksTUFBTVosU0FBU2EsU0FBUyxDQUFDQyxLQUFLLENBQUMsR0FBRztZQUN2Qkw7UUFBakIsTUFBTU0sV0FBV04sQ0FBQUEsbUJBQUFBLFlBQVlPLEdBQUcsQ0FBQ0osa0JBQWhCSCw4QkFBQUEsbUJBQXdCO1lBQUVRLFFBQVE7WUFBR0MsT0FBTztRQUFFO1FBQy9EVCxZQUFZVSxHQUFHLENBQUNQLEtBQUtHO1FBRXJCLE1BQU1LLGFBQWEz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QVkvQixHQUFHLENBQUNKLGtCQUFoQm1DLDhCQUFBQSxtQkFBd0IsS0FBSy9DLFNBQVNFLFFBQVE7SUFDdEU7SUFFQSxJQUFJK0MsYUFBNEI7SUFDaEMsSUFBSUMsV0FBVyxDQUFDO0lBQ2hCSCxZQUFZQyxPQUFPLENBQUMsQ0FBQ0csT0FBT3ZDO1FBQzFCLElBQUl1QyxRQUFRRCxVQUFVO1lBQ3BCQSxXQUFXQztZQUNYRixhQUFhckM7UUFDZjtJQUNGO0lBRUEsT0FBT3FDO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbGliL3NpbXVsYXRpb24udHM/MzYxYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCQVRURVJZX09QVElPTlMsIHR5cGUgUHJvY2Vzc2VkSW50ZXJ2YWwgfSBmcm9tICcuL2NhbGN1bGF0aW9ucyc7XG5pbXBvcnQgeyBnZXRMb2NhbERheUlzbyB9IGZyb20gJy4vZGF0ZXRpbWUnO1xuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2ltdWxhdGlvbkNvbmZpZyB7XHJcbiAgcG93ZXJDYXBLdz86IG51bWJlcjtcclxuICBpbml0aWFsU29jUmF0aW8/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2NlbmFyaW9SZXN1bHQge1xuICBvcHRpb25MYWJlbDogc3RyaW5nO1xyXG4gIGNhcGFjaXR5S3doOiBudW1iZXI7XHJcbiAgZXhjZWVkYW5jZUludGVydmFsc0JlZm9yZTogbnVtYmVyO1xyXG4gIGV4Y2VlZGFuY2VJbnRlcnZhbHNBZnRlcjogbnVtYmVyO1xyXG4gIGV4Y2VlZGFuY2VFbmVyZ3lLd2hCZWZvcmU6IG51bWJlcjtcbiAgZXhjZWVkYW5jZUVuZXJneUt3aEFmdGVyOiBudW1iZXI7XG4gIGFjaGlldmVkQ29tcGxpYW5jZURhdGFzZXQ6IG51bWJlcjtcbiAgYWNoaWV2ZWRDb21wbGlhbmNlRGFpbHlBdmVyYWdlOiBudW1iZXI7XG4gIGFjaGlldmVkQ29tcGxpYW5jZTogbnVtYmVyO1xuICBtYXhSZW1haW5pbmdFeGNlc3NLdzogbnVtYmVyO1xuICBzaGF2ZWRTZXJpZXM6IHsgdGltZXN0YW1wOiBzdHJpbmc7IG9yaWdpbmFsS3c6IG51bWJlcjsgc2hhdmVkS3c6IG51bWJlciB9W107XG59XG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNpbXVsYXRlU2luZ2xlU2NlbmFyaW8oXG4gIGludGVydmFsczogUHJvY2Vzc2VkSW50ZXJ2YWxbXSxcclxuICBiYXR0ZXJ5Q2FwYWNpdHlLd2g6IG51bWJlcixcclxuICBzaXppbmdLd05lZWRlZDogbnVtYmVyLFxyXG4gIG1heEV4Y2Vzc0t3OiBudW1iZXIsXHJcbiAgY29uZmlnPzogU2ltdWxhdGlvbkNvbmZpZ1xyXG4pOiBTY2VuYXJpb1Jlc3VsdCB7XG4gIGNvbnN0IHBvd2VyQ2FwS3cgPVxuICAgIGNvbmZpZz8ucG93ZXJDYXBLdyA/P1xyXG4gICAgKHNpemluZ0t3TmVlZGVkID4gMFxyXG4gICAgICA/IHNpemluZ0t3TmVlZGVkXHJcbiAgICAgIDogTWF0aC5taW4obWF4RXhjZXNzS3csIGJhdHRlcnlDYXBhY2l0eUt3aCAvIDAuNSkpO1xyXG4gIGNvbnN0IGluaXRpYWxTb2NSYXRpbyA9IGNvbmZpZz8uaW5pdGlhbFNvY1JhdGlvID8/IDAuNTtcbiAgY29uc3QgY2hhcmdlRWZmaWNpZW5jeSA9IDAuOTU7XG4gIGNvbnN0IGNvbnRyYWN0S3cgPSBNYXRoLm1heCgwLCAuLi5pbnRlcnZhbHMubWFwKChpbnRlcnZhbCkgPT4gaW50ZXJ2YWwuY29uc3VtcHRpb25LdyAtIGludGVydmFsLmV4Y2Vzc0t3KSk7XG5cbiAgbGV0IHNvYyA9IGJhdHRlcnlDYXBhY2l0eUt3aCAqIGluaXRpYWxTb2NSYXRpbztcbiAgbGV0IGV4Y2VlZGFuY2VJbnRlcnZhbHNCZWZvcmUgPSAwO1xyXG4gIGxldCBleGNlZWRhbmNlSW50ZXJ2YWxzQWZ0ZXIgPSAwO1xyXG4gIGxldCBleGNlZWRhbmNlRW5lcmd5S3doQmVmb3JlID0gMDtcclxuICBsZXQgZXhjZWVkYW5jZUVuZXJneUt3aEFmdGVyID0gMDtcbiAgbGV0IG1heFJlbWFpbmluZ0V4Y2Vzc0t3ID0gMDtcbiAgY29uc3QgZGFpbHlUb3RhbHMgPSBuZXcgTWFwPHN0cmluZywgeyBiZWZvcmU6IG51bWJlcjsgYWZ0ZXI6IG51bWJlciB9PigpO1xuXG4gIGNvbnN0IHNoYXZlZFNlcmllcyA9IGludGVydmFscy5tYXAoKGludGVydmFsKSA9PiB7XG4gICAgY29uc3QgZGF5ID0gaW50ZXJ2YWwudGltZXN0YW1wLnNsaWNlKDAsIDEwKTtcbiAgICBjb25zdCBkYXlUb3RhbCA9IGRhaWx5VG90YWxzLmdldChkYXkpID8/IHsgYmVmb3JlOiAwLCBhZnRlcjogMCB9O1xuICAgIGRhaWx5VG90YWxzLnNldChkYXksIGRheVRvdGFsKTtcblxuICAgIGNvbnN0IGhlYWRyb29tS3cgPSBNYXRoLm1heCgwLCBjb250cmFjdEt3IC0gaW50ZXJ2YWwuY29uc3VtcHRpb25Ldyk7XG4gICAgY29uc3QgY2hhcmdlS3doID0gTWF0aC5taW4oaGVhZHJvb21LdywgcG93ZXJDYXBLdykgKiAwLjI1ICogY2hhcmdlRWZmaWNpZW5jeTtcbiAgICBzb2MgPSBNYXRoLm1pbihiYXR0ZXJ5Q2FwYWNpdHlLd2gsIHNvYyArIGNoYXJnZUt3aCk7XG5cbiAgICBpZiAoaW50ZXJ2YWwuZXhjZXNzS3cgPiAwKSB7XG4gICAgICBleGNlZWRhbmNlSW50ZXJ2YWxzQmVmb3JlICs9IDE7XG4gICAgICBleGNlZWRhbmNlRW5lcmd5S3doQmVmb3JlICs9IGludGVydmFsLmV4Y2Vzc0t3aDtcbiAgICAgIGRheVRvdGFsLmJlZm9yZSArPSBpbnRlcnZhbC5leGNlc3NLd2g7XG5cbiAgICAgIGNvbnN0IGRpc2NoYXJnZU5lZWRLd2ggPSBNYXRoLm1pbihpbnRlcnZhbC5leGNlc3NLdywgcG93ZXJDYXBLdykgKiAwLjI1O1xuICAgICAgY29uc3QgZGVsaXZlcmVkS3doID0gTWF0aC5taW4oZGlzY2hhcmdlTmVlZEt3aCwgc29jKTtcbiAgICAgIHNvYyAtPSBkZWxpdmVyZWRLd2g7XG4gICAgICBjb25zdCBzaGF2ZWRLdyA9IGRlbGl2ZXJlZEt3aCAvIDAuMjU7XG5cbiAgICAgIGNvbnN0IHJlbWFpbmluZ0V4Y2Vzc0t3ID0gaW50ZXJ2YWwuZXhjZXNzS3cgLSBkZWxpdmVyZWRLd2ggLyAwLjI1O1xuICAgICAgaWYgKHJlbWFpbmluZ0V4Y2Vzc0t3ID4gMCkge1xuICAgICAgICBleGNlZWRhbmNlSW50ZXJ2YWxzQWZ0ZXIgKz0gMTtcbiAgICAgICAgZXhjZWVkYW5jZUVuZXJneUt3aEFmdGVyICs9IHJlbWFpbmluZ0V4Y2Vzc0t3ICogMC4yNTtcbiAgICAgICAgZGF5VG90YWwuYWZ0ZXIgKz0gcmVtYWluaW5nRXhjZXNzS3cgKiAwLjI1O1xuICAgICAgfVxuICAgICAgbWF4UmVtYWluaW5nRXhjZXNzS3cgPSBNYXRoLm1heChtYXhSZW1haW5pbmdFeGNlc3NLdywgcmVtYWluaW5nRXhjZXNzS3cpO1xuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdGltZXN0YW1wOiBpbnRlcnZhbC50aW1lc3RhbXAsXHJcbiAgICAgICAgb3JpZ2luYWxLdzogaW50ZXJ2YWwuY29uc3VtcHRpb25LdyxcclxuICAgICAgICBzaGF2ZWRLdzogaW50ZXJ2YWwuY29uc3VtcHRpb25LdyAtIHNoYXZlZEt3XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdGltZXN0YW1wOiBpbnRlcnZhbC50aW1lc3RhbXAsXHJcbiAgICAgIG9yaWdpbmFsS3c6IGludGVydmFsLmNvbnN1bXB0aW9uS3csXHJcbiAgICAgIHNoYXZlZEt3OiBpbnRlcnZhbC5jb25zdW1wdGlvbkt3XHJcbiAgICB9O1xyXG4gIH0pO1xuXG4gIGNvbnN0IGFjaGlldmVkQ29tcGxpYW5jZURhdGFzZXQgPVxuICAgIGV4Y2VlZGFuY2VFbmVyZ3lLd2hCZWZvcmUgPT09IDBcbiAgICAgID8gMVxuICAgICAgOiAxIC0gZXhjZWVkYW5jZUVuZXJneUt3aEFmdGVyIC8gZXhjZWVkYW5jZUVuZXJneUt3aEJlZm9yZTtcbiAgY29uc3QgZGFpbHlDb21wbGlhbmNlVmFsdWVzID0gQXJyYXkuZnJvbShkYWlseVRvdGFscy52YWx1ZXMoKSkubWFwKCh7IGJlZm9yZSwgYWZ0ZXIgfSkgPT5cbiAgICBiZWZvcmUgPT09IDAgPyAxIDogMSAtIGFmdGVyIC8gYmVmb3JlXG4gICk7XG4gIGNvbnN0IGFjaGlldmVkQ29tcGxpYW5jZURhaWx5QXZlcmFnZSA9XG4gICAgZGFpbHlDb21wbGlhbmNlVmFsdWVzLmxlbmd0aCA9PT0gMFxuICAgICAgPyAxXG4gICAgICA6IGRhaWx5Q29tcGxpYW5jZVZhbHVlcy5yZWR1Y2UoKHN1bSwgdmFsdWUpID0+IHN1bSArIHZhbHVlLCAwKSAvIGRhaWx5Q29tcGxpYW5jZVZhbHVlcy5sZW5ndGg7XG5cbiAgcmV0dXJuIHtcbiAgICBvcHRpb25MYWJlbDogQkFUVEVSWV9PUFRJT05TLmZpbmQoKGIpID0+IGIuY2FwYWNpdHlLd2ggPT09IGJhdHRlcnlDYXBhY2l0eUt3aCk/LmxhYmVsID8/IGAke2JhdHRlcnlDYXBhY2l0eUt3aH0ga1doYCxcclxuICAgIGNhcGFjaXR5S3doOiBiYXR0ZXJ5Q2FwYWNpdHlLd2gsXHJcbiAgICBleGNlZWRhbmNlSW50ZXJ2YWxzQmVmb3JlLFxyXG4gICAgZXhjZWVkYW5jZUludGVydmFsc0FmdGVyLFxuICAgIGV4Y2VlZGFuY2VFbmVyZ3lLd2hCZWZvcmUsXG4gICAgZXhjZWVkYW5jZUVuZXJneUt3aEFmdGVyLFxuICAgIGFjaGlldmVkQ29tcGxpYW5jZURhdGFzZXQsXG4gICAgYWNoaWV2ZWRDb21wbGlhbmNlRGFpbHlBdmVyYWdlLFxuICAgIGFjaGlldmVkQ29tcGxpYW5jZTogYWNoaWV2ZWRDb21wbGlhbmNlRGF0YXNldCxcbiAgICBtYXhSZW1haW5pbmdFeGNlc3NLdyxcbiAgICBzaGF2ZWRTZXJpZXNcbiAgfTtcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaW11bGF0ZUFsbFNjZW5hcmlvcyhcclxuICBpbnRlcnZhbHM6IFByb2Nlc3NlZEludGVydmFsW10sXHJcbiAgc2l6aW5nS3dOZWVkZWQ6IG51bWJlcixcclxuICBjb25maWc/OiBTaW11bGF0aW9uQ29uZmlnXHJcbik6IFNjZW5hcmlvUmVzdWx0W10ge1xyXG4gIGNvbnN0IG1heEV4Y2Vzc0t3ID0gTWF0aC5tYXgoMCwgLi4uaW50ZXJ2YWxzLm1hcCgoaW50ZXJ2YWwpID0+IGludGVydmFsLmV4Y2Vzc0t3KSk7XHJcbiAgcmV0dXJuIEJBVFRFUllfT1BUSU9OUy5tYXAoKG9wdGlvbikgPT5cclxuICAgIHNpbXVsYXRlU2luZ2xlU2NlbmFyaW8oaW50ZXJ2YWxzLCBvcHRpb24uY2FwYWNpdHlLd2gsIHNpemluZ0t3TmVlZGVkLCBtYXhFeGNlc3NLdywgY29uZmlnKVxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kSGlnaGVzdFBlYWtEYXkoaW50ZXJ2YWxzOiBQcm9jZXNzZWRJbnRlcnZhbFtdKTogc3RyaW5nIHwgbnVsbCB7XG4gIGNvbnN0IHRvdGFsc0J5RGF5ID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgaW50ZXJ2YWxzLmZvckVhY2goKGludGVydmFsKSA9PiB7XG4gICAgY29uc3QgZGF5ID0gZ2V0TG9jYWxEYXlJc28oaW50ZXJ2YWwudGltZXN0YW1wKTtcbiAgICBpZiAoIWRheSkgcmV0dXJuO1xuICAgIHRvdGFsc0J5RGF5LnNldChkYXksICh0b3RhbHNCeURheS5nZXQoZGF5KSA/PyAwKSArIGludGVydmFsLmV4Y2Vzc0t3KTtcbiAgfSk7XG5cclxuICBsZXQgaGlnaGVzdERheTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgbGV0IG1heFRvdGFsID0gLTE7XHJcbiAgdG90YWxzQnlEYXkuZm9yRWFjaCgodG90YWwsIGRheSkgPT4ge1xyXG4gICAgaWYgKHRvdGFsID4gbWF4VG90YWwpIHtcclxuICAgICAgbWF4VG90YWwgPSB0b3RhbDtcclxuICAgICAgaGlnaGVzdERheSA9IGRheTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGhpZ2hlc3REYXk7XHJcbn1cclxuIl0sIm5hbWVzIjpbIkJBVFRFUllfT1BUSU9OUyIsImdldExvY2FsRGF5SXNvIiwic2ltdWxhdGVTaW5nbGVTY2VuYXJpbyIsImludGVydmFscyIsImJhdHRlcnlDYXBhY2l0eUt3aCIsInNpemluZ0t3TmVlZGVkIiwibWF4RXhjZXNzS3ciLCJjb25maWciLCJwb3dlckNhcEt3IiwiTWF0aCIsIm1pbiIsImluaXRpYWxTb2NSYXRpbyIsImNoYXJnZUVmZmljaWVuY3kiLCJjb250cmFjdEt3IiwibWF4IiwibWFwIiwiaW50ZXJ2YWwiLCJjb25zdW1wdGlvbkt3IiwiZXhjZXNzS3ciLCJzb2MiLCJleGNlZWRhbmNlSW50ZXJ2YWxzQmVmb3JlIiwiZXhjZWVkYW5jZUludGVydmFsc0FmdGVyIiwiZXhjZWVkYW5jZUVuZXJneUt3aEJlZm9yZSIsImV4Y2VlZGFuY2VFbmVyZ3lLd2hBZnRlciIsIm1heFJlbWFpbmluZ0V4Y2Vzc0t3IiwiZGFpbHlUb3RhbHMiLCJNYXAiLCJzaGF2ZWRTZXJpZXMiLCJkYXkiLCJ0aW1lc3RhbXAiLCJzbGljZSIsImRheVRvdGFsIiwiZ2V0IiwiYmVmb3JlIiwiYWZ0ZXIiLCJzZXQiLCJoZWFkcm9vbUt3IiwiY2hhcmdlS3doIiwiZXhjZXNzS3doIiwiZGlzY2hhcmdlTmVlZEt3aCIsImRlbGl2ZXJlZEt3aCIsInNoYXZlZEt3IiwicmVtYWluaW5nRXhjZXNzS3ciLCJvcmlnaW5hbEt3IiwiYWNoaWV2ZWRDb21wbGlhbmNlRGF0YXNldCIsImRhaWx5Q29tcGxpYW5jZVZhbHVlcyIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImFjaGlldmVkQ29tcGxpYW5jZURhaWx5QXZlcmFnZSIsImxlbmd0aCIsInJlZHVjZSIsInN1bSIsInZhbHVlIiwib3B0aW9uTGFiZWwiLCJmaW5kIiwiYiIsImNhcGFjaXR5S3doIiwibGFiZWwiLCJhY2hpZXZlZENvbXBsaWFuY2UiLCJzaW11bGF0ZUFsbFNjZW5hcmlvcyIsIm9wdGlvbiIsImZpbmRIaWdoZXN0UGVha0RheSIsInRvdGFsc0J5RGF5IiwiZm9yRWFjaCIsImhpZ2hlc3REYXkiLCJtYXhUb3RhbCIsInRvdGFsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/simulation.ts\n"));

/***/ })

});